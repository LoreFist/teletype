# Teletype
## задача
Yii2 Postgres API endpoint с сохранением информации при RPC 1000+

### Общая идея:

Апи ендпоинт принимает пост запрос с данными, загружается в форму и валидируется. 
Использована кастомная валидация на предмет уникальности данных. 
Данные передаются в очередь, она отдельным процесс уже сохраняет данные в БД.

Модели/Миграция/связи бд - стандартный подход реляционых бд. В основном стандартный подход yii2 без лишних DTO и прочего.

- Для увеличения RPC для точки доступа API был убран .env т.к. он сжирает ресурс на чтение файла с диска
- Для увеличения RPC для точки доступа API был убран роутинг/парсинг url запускается 
- Для увеличения RPC был добавлен параметр PERSISTENT 
- Для увеличения RPC была подключена jit компиляция
- Для увеличения RPC был выключен лог nginx api
- Для увеличения RPC был добавлен буфер fastcgi

### Дальнейший план увеличения RPC:
В прод версии настройка PgBouncer и HaProxy увелечение кол-ва серверов исходя нужного RPC

### Тестирование:
```php yii gen``` последовательная отправка запросов
результат: 250+ RPC

```php yii gen/async``` параллельная отправка запросов
результат: 1900+ RPC

з.ы. по заданию требовался пхп-док, по моему мнению для более чистого кода он не требуется, т.к. пхп-8. 
также для чистоты убраны в моделях created_at updated_at